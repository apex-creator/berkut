<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>xWRL1432 MMWAVE-L-SDK: Booting Tools</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="xWRL1432 MMWAVE-L-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xWRL1432 MMWAVE-L-SDK
   &#160;<span id="projectnumber">05.05.04.02</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('TOOLS_BOOT.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Booting Tools </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md531">Introduction</a></li>
<li class="level1"><a href="#autotoc_md532">Important files and folders</a></li>
<li class="level1"><a href="#autotoc_md533">Out2RPRC</a></li>
<li class="level1"><a href="#autotoc_md534">Multi-core Image Gen</a></li>
<li class="level1"><a href="#autotoc_md535">CRC Multicore Image</a></li>
<li class="level1"><a href="#autotoc_md536">Append BIN CRC</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_tools_tools_boot"></a></p>
<dl class="section note"><dt>Note</dt><dd>To see the exact sequence of steps in which applications and secondary bootloader (SBL) are converted from compiler generated .out files to boot images, see the makefile <code>makefile_ccs_bootimage_gen</code> that is included in every example and secondary bootloader (SBL) CCS project.</dd>
<dd>
If you are using makefile based build, then see the file named <code>makefile</code> in the example folder.</dd></dl>
<h1><a class="anchor" id="autotoc_md531"></a>
Introduction</h1>
<p>This section describes the various tools that are used to create boot images for all the SDK applications</p>
<h1><a class="anchor" id="autotoc_md532"></a>
Important files and folders</h1>
<table class="doxtable">
<tr>
<th>Folder/Files </th><th>Description  </th></tr>
<tr>
<td colspan="2" bgcolor="#F0F0F0">${SDK_INSTALL_PATH}/tools/boot/ </td></tr>
<tr>
<td>multicoreImageGen/ </td><td>Tool to combine multiple RPRC into a single binary  </td></tr>
<tr>
<td>out2rprc/ </td><td>Tool to convert compiler generated ELF .out for a CPU to a compact and loadable binary representation, called RPRC.  </td></tr>
<tr>
<td>crcMulticoreimage/ </td><td>Tool to compute CRC of the images and the meta header.  </td></tr>
<tr>
<td>appendBinCrc/ </td><td>Tool to calculate and append the CRC of entire multicore image at the end of the file.  </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md533"></a>
Out2RPRC</h1>
<ul>
<li>This tool converts the application executable (.out) into custom TI RPRC (.rprc) image - an image loadable by the ROM bootloader (RBL).</li>
<li>The output RPRC file is typically much smaller than the original executable (*.out) file.</li>
<li>The RPRC files are intermediate files in a format that is consumed by <code>MulticoreImageGen</code> tool that generates the final binary that is flashed (<code>*.appimage</code>)</li>
<li>The RPRC file format contains header to various sections in the executable like section run address, size and a overall header which mentions the number of sections and the start offset to the first section.</li>
<li>The RPRC magic word is <code>0x43525052</code> - which is ASCII equivalent for <code>RPRC</code></li>
<li>Shown below is the file header and section format for RPRC files.</li>
</ul>
<p> <style>div.image img[src="tools_rprc_format.png"]{width:40%}</style> </p><div class="image">
<img src="tools_rprc_format.png" alt=""/>
<div class="caption">
RPRC File Format</div></div>
<h1><a class="anchor" id="autotoc_md534"></a>
Multi-core Image Gen</h1>
<ul>
<li>This tool converts the RPRC files created for each CPU into a single combined multicore application image that can be booted by the ROM bootloader (RBL)</li>
<li>Shown below is the file format for multicore image files.</li>
</ul>
<p> <style>div.image img[src="tools_multicore_format.png"]{width:60%}</style> </p><div class="image">
<img src="tools_multicore_format.png" alt=""/>
<div class="caption">
Multi-core Image File Format</div></div>
<ul>
<li>The number of meta headers present is equal to the number of cores included.</li>
<li>The meta header magic word is <code>0x5254534D</code> - which is ASCII equivalent for <code>MSTR</code></li>
<li>In Windows or Linux, use the following command to convert RPRC images into a multicore <code>.appimage</code> file <div class="fragment"><div class="line">cd ${SDK_INSTALL_PATH}/tools/boot/multicoreImageGen</div>
<div class="line">MulticoreImageGen.exe LE {BOOT_MODE} {BOOT_VECTOR_ADDRESS} {SH_MEM_CONFIG} {BOOTIMAGE_BIN_NAME} {APPS_FLAGS} {BOOTIMAGE_RPRC} {RFS_FLAGS} {BSS_RPRC_BIN}</div>
</div><!-- fragment --></li>
<li>Here,<ul>
<li>BOOT_MODE is 0 for Append mode</li>
<li>BOOT_VECTOR_ADDRESS is Reset vector address for APPSS Application</li>
<li>SH_MEM_CONFIG is 0</li>
<li>BOOTIMAGE_BIN_NAME is the appimage name generated</li>
<li>APPS_FLAGS is given by the CORE ID for APPSS</li>
<li>BOOTIMAGE_RPRC is the RPRC format of APPSS image</li>
<li>RFS_FLAGS is given by the CORE ID for FECSS</li>
<li>BSS_RPRC_BIN is the RPRC format of FECSS image</li>
</ul>
</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CORE  </th><th class="markdownTableHeadNone">CORE ID   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">m4fss (APPSS)  </td><td class="markdownTableBodyNone">0x35510000   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">m3fss (FECSS)  </td><td class="markdownTableBodyNone">0xb5510000   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md535"></a>
CRC Multicore Image</h1>
<ul>
<li>The CRC Multicore image is used for updating the CRC of images and the meta header.</li>
<li>The CRC generator takes multicore image as input and the output is placed in the same multicore image.</li>
<li>In Windows or Linux, use the following command <div class="fragment"><div class="line">cd ${SDK_INSTALL_PATH}/tools/boot/crcMultiCoreImageGen</div>
<div class="line">crcMultiCoreimage.exe {BOOTIMAGE_BIN_NAME} 0</div>
</div><!-- fragment --></li>
<li>Here,<ul>
<li>BOOTIMAGE_BIN_NAME is the appimage generated by multicoreImageGen tool</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md536"></a>
Append BIN CRC</h1>
<ul>
<li>Append BIN CRC takes binary image as input, calculates CRC32 on the file and appends the CRC to the same file.</li>
<li>In Windows or Linux, use the following command <div class="fragment"><div class="line">cd ${SDK_INSTALL_PATH}/tools/boot/appendBinCrc</div>
<div class="line">appendBinCrc.exe {BOOTIMAGE_BIN_NAME}</div>
</div><!-- fragment --></li>
<li>Here,<ul>
<li>BOOTIMAGE_BIN_NAME is the appimage generated by CRC Multocore Image tool </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
