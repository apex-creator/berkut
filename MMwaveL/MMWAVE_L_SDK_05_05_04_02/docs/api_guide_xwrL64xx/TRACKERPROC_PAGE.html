<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/png">    
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>xWRL6432 MMWAVE-L-SDK: Trackerproc</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<style>
.tinav {
    background: #c00;
    /* height: 41.375px; */
    height: 30px;
    }
</style>    
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="xWRL6432 MMWAVE-L-SDK"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 40px;">
  <td id="projectlogo"><a href="https://www.ti.com"><img alt="Logo" src="ti_logo.svg"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xWRL6432 MMWAVE-L-SDK
   &#160;<span id="projectnumber">05.05.04.02</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <img id="MSearchSelect" src="search/mag.svg" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
<div class=tinav></div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('TRACKERPROC_PAGE.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Trackerproc </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md575">Introduction</a></li>
<li class="level1"><a href="#autotoc_md576">Block Diagram</a></li>
<li class="level1"><a href="#autotoc_md577">Usage Overview</a><ul><li class="level2"><a href="#autotoc_md578">API</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md579">Example Usage</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_components_datapath_trackerproc"></a></p>
<h1><a class="anchor" id="autotoc_md575"></a>
Introduction</h1>
<p>The tracker DPU is processing unit layer called in the processing chain after the CFAR DPU. It calls the group tracker from the library included in the SDK release in folder source/alg/gtrack/lib. The group tracker algorithm is based on the extended Kalman filter. The input to this DPU is a point cloud list created by the CFAR DPU. The output of the tracker DPU is a list of tracking objects, along with the index list.</p>
<h1><a class="anchor" id="autotoc_md576"></a>
Block Diagram</h1>
<p>Tracker process data flow diagram.</p>
<p> <style>div.image img[src="trackerproc.png"]{width:80%}</style> </p><div class="image">
<img src="trackerproc.png" alt=""/>
<div class="caption">
Tracker process data flow</div></div>
<h1><a class="anchor" id="autotoc_md577"></a>
Usage Overview</h1>
<h2><a class="anchor" id="autotoc_md578"></a>
API</h2>
<p>The Tracker DPU APIs are listed below.</p>
<ul>
<li><a class="el" href="trackerproc_8h.html#a12d9f21871d02a38007e206e0edfef1b">DPU_TrackerProc_init()</a>: It allocates memory to store its internal data object.</li>
<li><a class="el" href="trackerproc_8h.html#a903f60c2902474767e362b93a3327645">DPU_TrackerProc_config()</a>: The function is configuration function. It initializes tracking parameters based on the set of CLI configuration commands. It also allocates the memory for the output target list and the target index array. It calls the group tracker library function gtrack_create().</li>
<li><a class="el" href="trackerproc_8h.html#a401c929e90faa423dde365fc3e613e7f">DPU_TrackerProc_process()</a>: The function is the DPU process function. In the processing chain it is called per frame after the CFAR DPU. It converts the point cloud list from Cartesian coordinates to spherical coordinates and then invokes the group tracker library function gtrack_step(). The group tracker outputs the target list of type GTRACK_targetDesc and the target indices array of type uint8_t. The process function then copies the target list to the final output list of type <a class="el" href="structtrackerProc__Target.html" title="Structure holds the target features.">trackerProc_Target</a>.<ul>
<li><b>Input API</b>: This input to a process function is a point cloud list with elements that are defined by the following structure: <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>DPIF_PointCloudCartesianExt_t</div>
<div class="line">{</div>
<div class="line"><span class="keywordtype">float</span> x;</div>
<div class="line"><span class="keywordtype">float</span> y;</div>
<div class="line"><span class="keywordtype">float</span> z;</div>
<div class="line"><span class="keywordtype">float</span> velocity;</div>
<div class="line"><span class="keywordtype">float</span> snr;</div>
<div class="line"><span class="keywordtype">float</span> noise;</div>
<div class="line">} DPIF_PointCloudCartesianExt;</div>
</div><!-- fragment --></li>
<li><b>Output API</b>: The output is structure defined as <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>DPU_TrackerProc_OutParams_t</div>
<div class="line">{</div>
<div class="line">uint32_t numTargets;</div>
<div class="line">uint32_t numIndices; uint8_t presenceInd;</div>
<div class="line"><a class="code" href="structtrackerProc__Target.html">trackerProc_Target</a> *tList;</div>
<div class="line"><a class="code" href="trackerproc_8h.html#a1ab04d733cd24685cb50d4ef9355b72f">trackerProc_TargetIndex</a> *targetIndex;</div>
<div class="line">}<a class="code" href="structDPU__TrackerProc__OutParams.html">DPU_TrackerProc_OutParams</a>;</div>
</div><!-- fragment --> where the target list *tList is a pointer to array of structures defined as: <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>trackerProc_Target_t</div>
<div class="line">{</div>
<div class="line">uint32_t tid;</div>
<div class="line"><span class="keywordtype">float</span> posX;</div>
<div class="line"><span class="keywordtype">float</span> posY;</div>
<div class="line"><span class="keywordtype">float</span> posZ;</div>
<div class="line"><span class="keywordtype">float</span> velX;</div>
<div class="line"><span class="keywordtype">float</span> velY;</div>
<div class="line"><span class="keywordtype">float</span> velZ;</div>
<div class="line"><span class="keywordtype">float</span> accX;</div>
<div class="line"><span class="keywordtype">float</span> accY;</div>
<div class="line"><span class="keywordtype">float</span> accZ;</div>
<div class="line"><span class="keywordtype">float</span> ec[16];</div>
<div class="line"><span class="keywordtype">float</span> g;</div>
<div class="line"><span class="keywordtype">float</span> confidenceLevel;</div>
<div class="line">} <a class="code" href="structtrackerProc__Target.html">trackerProc_Target</a>;</div>
</div><!-- fragment --> and the target index pointer *targetIndex is of type trackerProc_TargetIndex (defined as uint8_t).</li>
</ul>
</li>
<li><a class="el" href="trackerproc_8h.html#ac21407cdf8eb5d5623cd662badc2e05c">DPU_TrackerProc_deinit()</a>: It frees up the resources for this DPU.</li>
</ul>
<h1><a class="anchor" id="autotoc_md579"></a>
Example Usage</h1>
<p>Include the below file to access the APIs </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="trackerproc_8h.html">datapath/dpu/trackerproc/v0/trackerproc.h</a>&gt;</span></div>
</div><!-- fragment --><p> DPU Initialization Example </p><div class="fragment"><div class="line">    trackerProcDpuHandle =  <a class="code" href="trackerproc_8h.html#a12d9f21871d02a38007e206e0edfef1b">DPU_TrackerProc_init</a>(&amp;errorCode);</div>
<div class="line">    <span class="keywordflow">if</span> (trackerProcDpuHandle == NULL)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a> (<span class="stringliteral">&quot;Debug: Tracker Proc DPU initialization returned error %d\n&quot;</span>, errorCode);</div>
<div class="line">        <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a> (0);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
</div><!-- fragment --><p> DPU Configuration Example </p><div class="fragment"><div class="line">retVal = <a class="code" href="trackerproc_8h.html#a903f60c2902474767e362b93a3327645">DPU_TrackerProc_config</a>(trackerProcDpuHandle, &amp;trackerCfg);</div>
<div class="line"><span class="keywordflow">if</span> (retVal &lt; 0)</div>
<div class="line">{</div>
<div class="line">    CLI_write(<span class="stringliteral">&quot;Tracker DPU config return error:%d \n&quot;</span>, retVal);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(0);</div>
<div class="line">}</div>
</div><!-- fragment --><p> DPU Process Trigger Example </p><div class="fragment"><div class="line">retVal = <a class="code" href="trackerproc_8h.html#a401c929e90faa423dde365fc3e613e7f">DPU_TrackerProc_process</a>(trackerProcDpuHandle,</div>
<div class="line">                                        (uint16_t) (numDetectedPoints[0] + numDetectedPoints[1]),</div>
<div class="line">                                        cfarDetObjOut,</div>
<div class="line">                                        &amp;trackerOutParams);</div>
<div class="line"><span class="keywordflow">if</span> (retVal != 0)</div>
<div class="line">{</div>
<div class="line">    CLI_write(<span class="stringliteral">&quot;Error: DPU_TrackerProc_process failed with error code %d&quot;</span>, retVal);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(0);</div>
<div class="line">}</div>
</div><!-- fragment --><p> DPU Close Example </p><div class="fragment"><div class="line">retval = <a class="code" href="trackerproc_8h.html#ac21407cdf8eb5d5623cd662badc2e05c">DPU_TrackerProc_deinit</a>(TrackerProcDpuhandle);</div>
<div class="line"><span class="keywordflow">if</span>(retVal &lt; 0)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Not Expected */</span></div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a>(<span class="stringliteral">&quot;TrackerProc DPU deinit error %d\n&quot;</span>, retVal);</div>
<div class="line">    <a class="code" href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a>(0);</div>
<div class="line">}</div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="atrackerproc_8h_html_a401c929e90faa423dde365fc3e613e7f"><div class="ttname"><a href="trackerproc_8h.html#a401c929e90faa423dde365fc3e613e7f">DPU_TrackerProc_process</a></div><div class="ttdeci">int32_t DPU_TrackerProc_process(DPU_TrackerProc_Handle handle, uint32_t numObjsIn, DPIF_PointCloudCartesianExt *cfarDetObjList, DPU_TrackerProc_OutParams *outParams)</div></div>
<div class="ttc" id="atrackerproc_8h_html_a903f60c2902474767e362b93a3327645"><div class="ttname"><a href="trackerproc_8h.html#a903f60c2902474767e362b93a3327645">DPU_TrackerProc_config</a></div><div class="ttdeci">int32_t DPU_TrackerProc_config(DPU_TrackerProc_Handle handle, DPU_TrackerProc_Config *pConfigIn)</div></div>
<div class="ttc" id="atrackerproc_8h_html_a1ab04d733cd24685cb50d4ef9355b72f"><div class="ttname"><a href="trackerproc_8h.html#a1ab04d733cd24685cb50d4ef9355b72f">trackerProc_TargetIndex</a></div><div class="ttdeci">uint8_t trackerProc_TargetIndex</div><div class="ttdef"><b>Definition:</b> trackerproc.h:209</div></div>
<div class="ttc" id="atrackerproc_8h_html_ac21407cdf8eb5d5623cd662badc2e05c"><div class="ttname"><a href="trackerproc_8h.html#ac21407cdf8eb5d5623cd662badc2e05c">DPU_TrackerProc_deinit</a></div><div class="ttdeci">int32_t DPU_TrackerProc_deinit(DPU_TrackerProc_Handle handle)</div></div>
<div class="ttc" id="astructDPU__TrackerProc__OutParams_html"><div class="ttname"><a href="structDPU__TrackerProc__OutParams.html">DPU_TrackerProc_OutParams</a></div><div class="ttdoc">TrackerProc output parameter structure.</div><div class="ttdef"><b>Definition:</b> trackerproc.h:316</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_gafe348ab5badd2c15118f95e21bb192c6"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#gafe348ab5badd2c15118f95e21bb192c6">DebugP_log</a></div><div class="ttdeci">#define DebugP_log(format,...)</div><div class="ttdoc">Function to log a string to the enabled console.</div><div class="ttdef"><b>Definition:</b> DebugP.h:213</div></div>
<div class="ttc" id="astructtrackerProc__Target_html"><div class="ttname"><a href="structtrackerProc__Target.html">trackerProc_Target</a></div><div class="ttdoc">Structure holds the target features.</div><div class="ttdef"><b>Definition:</b> trackerproc.h:234</div></div>
<div class="ttc" id="atrackerproc_8h_html"><div class="ttname"><a href="trackerproc_8h.html">trackerproc.h</a></div><div class="ttdoc">Implements Tracker processing functionality.</div></div>
<div class="ttc" id="atrackerproc_8h_html_a12d9f21871d02a38007e206e0edfef1b"><div class="ttname"><a href="trackerproc_8h.html#a12d9f21871d02a38007e206e0edfef1b">DPU_TrackerProc_init</a></div><div class="ttdeci">DPU_TrackerProc_Handle DPU_TrackerProc_init(int32_t *errCode)</div></div>
<div class="ttc" id="agroup__KERNEL__DPL__DEBUG_html_ga552e9055ca7eab5fe6c224c6cd5a9d4c"><div class="ttname"><a href="group__KERNEL__DPL__DEBUG.html#ga552e9055ca7eab5fe6c224c6cd5a9d4c">DebugP_assert</a></div><div class="ttdeci">#define DebugP_assert(expression)</div><div class="ttdoc">Function to call for assert check.</div><div class="ttdef"><b>Definition:</b> DebugP.h:159</div></div>
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
